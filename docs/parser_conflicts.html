
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Lox</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <meta name="description" content="Lox is a lexer and parser generator for Go" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0" />
  <link rel="stylesheet" href="./prism.css"/>
  <link rel="stylesheet" href="./css.css" />
  <link 
</head>
<body>
  <div class="sidebar">
    <h1><a href="./index.html">Lox</a></h1>
    <ul>
  <li>
    <a href="getting_started.html">Getting Started</a>
  </li>
      <li><a href="./reference.html">Reference</a>
        <ul>
  <li>
    <a href="lexer_reference.html">Lexer Reference</a>
  </li>
  <li>
    <a href="parser_reference.html">Parser Reference</a>
  </li>
  <li>
    <a href="go_reference.html">Go Reference</a>
  </li>
        </ul>
      </li>
      <li><a href="./advanced.html">Advanced</a>
        <ul>
  <li>
    <a href="parser_conflicts.html">Parser Conflicts</a>
      <ul>
      </ul>
  </li>
        </ul>
      </li>
    </ul>
  </div>

  <div class="article">
    <div class="sidebar-button">
      <a  href="javascript:void(0)" onclick="toggleSidebar()"></a>
    </div>
    <h1 id="conflicts">충돌</h1>

<p>다음 문법 조각을 <code>lox</code>로 처리하면 <code>grammar has conflicts</code> 오류와 함께 실패합니다:</p>

<pre><code class="language-lox">expr = expr '+' expr
     | expr '*' expr
     | NUMBER
</code></pre>

<p><code>-report</code> 플래그와 함께 <code>lox</code>를 실행하면 자세한 내용을 확인할 수 있습니다:</p>

<pre><code>I5:
  expr = expr .PLUS expr, EOF
  expr = expr .PLUS expr, PLUS
  expr = expr .PLUS expr, MUL
  expr = expr PLUS expr., EOF
  expr = expr PLUS expr., PLUS
  expr = expr PLUS expr., MUL
  expr = expr .MUL expr, EOF
  expr = expr .MUL expr, PLUS
  expr = expr .MUL expr, MUL
    on EOF reduce expr
    on MUL reduce expr &lt;== CONFLICT
    on MUL shift I3 &lt;== CONFLICT
    on PLUS shift I4 &lt;== CONFLICT
    on PLUS reduce expr &lt;== CONFLICT
</code></pre>

<p>위 내용은 파서 상태 머신의 한 상태를 나타냅니다. 이 상태에서 파서는 
방금 <code>expr PLUS expr</code>(예: <code>2 + 2</code>)을 파싱했습니다. 다음 토큰이 
<code>MUL</code>이라고 가정하면, 무엇을 해야 할까요? <code>expr PLUS expr</code>을 
<code>expr</code>로 축약(reduce)하거나 <code>MUL</code>을 이동(shift)할 수 있습니다. 
문법이 어떤 동작을 수행해야 하는지 명확하지 않으므로 모호합니다.</p>

<p>이를 해결하는 한 가지 방법은 문법을 리팩토링하는 것입니다:</p>

<pre><code class="language-lox">expr = expr '+' term
     | term

term = term '*' factor
     | factor

factor = number

number = NUMBER
       | '-' NUMBER
</code></pre>

<p>일부 충돌은 리팩토링으로만 해결할 수 있지만, 많은 종류의 충돌은 
<a href="./parser_reference.html#precedence_qualifiers">우선순위 수식어</a>를 
사용하여 해결할 수 있습니다:</p>

<pre><code class="language-lox">expr = expr '+' expr  @left(1)
     | expr '*' expr  @left(2)
     | NUMBER
</code></pre>

<p>문법의 <code>@left</code> 수식어는 <code>lox</code>에게 <code>expr '+' expr</code>와 
<code>expr '*' expr</code> 사이에 충돌이 발생하면 후자가 전자보다 우선순위를 
가져야 한다고 알려줍니다.</p>

  </div>

  <script src="./scripts.js"></script>
  <script src="./prism.js"></script>
  <script src="./prism-lox.js"></script>
</body>
